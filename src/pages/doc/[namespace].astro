---
import Layout from '../../layouts/markdown.astro';

import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const allDoc = await getCollection('sugar');

  const params = [];
  for (let [i, docObj] of allDoc.entries()) {
    params.push({
      params: {
        namespace: docObj.id.replace(/\//gm, '.').replace(/\.mdx$/, ''),
      },
    });
  }

  return params;
}

const allDoc = await getCollection('sugar'),
  params = Astro.params;

let DocItem;
for (let [i, docObj] of allDoc.entries()) {
  if (
    docObj.id.replace(/\//gm, '.').replace(/\.mdx$/, '') === params.namespace
  ) {
    DocItem = await docObj.render();
    break;
  }
}
---

<Layout>
  <DocItem?.Content />
</Layout>
